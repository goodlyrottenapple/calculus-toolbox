---
layout: page
title: "Scala UI"
category: doc
date: 2015-04-10 09:09:57
---

### UI Overview
After generating the calculus and recompiling all the UI classes, running `make gui` inside the generated calculus should produce the window below.

![scala gui screenshot](https://raw.githubusercontent.com/goodlyrottenapple/calculus-toolbox/gh-pages/_files/scala_gui_screen1.png)

The bar at the top, containing the text input field, is used by the user to input sequents into the UI. The user uses ASCII and if the input can be parsed, it is [typeset](#latex-typesetting) in latex for better readability. Pressing Enter after the user entered a valid sequent will launch the [proof search](#proof-search). If the proof search is successful, the resulting proof tree found is displayed in the panel below. The UI allows the user to interactively modify the proof trees by clicking on any of the sequents in the tree:

![scala gui screenshot, pt close up](https://raw.githubusercontent.com/goodlyrottenapple/calculus-toolbox/gh-pages/_files/scala_gui_screen2.png)


Each sequent in the proof tree can be clicked on and the proof tree can be modified at this point. The options, listed in the drop down menu shown above, are described in more detail in the following table:

{: .table .table-responsive}
Copy                   | Copies the selected sequent as an ASCII string
Add&nbsp;as&nbsp;assm  | Adds the selected sequent to the list of assumptions
Merge&nbsp;above       | Looks at all the generated proof trees in the session (shown in a list on the right), searching for a proof tree with a conclusion which matches the selected sequent. If such a proof tree is found, it is copied into the current one and merged at the selected sequent. Note that the selected sequent must be a leaf of the tree. (To make the selected sequent a leaf, use the option `Delete above`)
FindPT                 | This option will start a [proof search](#proof-search) with the selected sequent as the goal/target. If a proof tree is found, it is automatically added into the current proof tree.
Add&nbsp;above         | If the selected sequent is a leaf in the proof tree, add above will open a dialog window with a list of all the possible derivations for the selected sequent:<br> ![scala gui screenshot, pt close up](https://raw.githubusercontent.com/goodlyrottenapple/calculus-toolbox/gh-pages/_files/scala_gui_screen3.png)<br> Selecting a rule form the list will apply the rule to the selected sequent and derive the premises, adding them to the tree.
Add&nbsp;below         | If the selected sequent is at the root of the tree, this option will allow the user to grow the tree downwards, i.e. to generate a proof tree for a different conclusion by extending the current proof tree downwards. A prompt for the new conclusion will be displayed, and if a rule is found that can derive the current conclusion from the new one, the new conclusion will be added as the root of the tree.
Delete&nbsp;above      | Delete above simply removes any part of the proof tree above the current sequent and turns the current sequent into a premise
Delete&nbsp;below      | Delete below removes any part of the proof tree below the current sequent, making the current sequent the root/conclusion of the proof tree
Apply&nbsp;Cut         | If the calculus contains the cut rule (more specifically SingleCut), this option will prompt the user for a cut formula and then try to apply [proof search](#proof-search) to the two new branches introduced by the cut rule. If one or both proof trees cannot be found, that branch/branches will be added as a premise.


Next in in main screen is the side bar on the right. This sidebar contains all the assumptions and proof trees in this session as well as the loaded up macros. The proof trees and assumptions can be saved into a text file and loaded back up into the UI (Use __File__ > __Open...__ and __File__ > __Save/Save As...__ ). 

To add a sequent as an assumption, first type the sequent into the text input at the top and when the sequent is parsed, click on the `Add assm` button underneath the assumption list.

<table class="table" markdown="0">
<tr>
<td><span class="glyphicon glyphicon-exclamation-sign"></span></td>
<td markdown="1">
In order to use assumptions in the `der` function and by extension the proof search, the `Prem` rule must be added to the JSON file. To do this, add the following declaration to the `calc_structure_rules` under `RuleZer`:

~~~json
"Prem" : {
    "ascii" : "Prem",
    "latex" : "Prem",
    "condition" : "(\\<lambda>x. seq = x)",
    "locale" : "Premise seq"
}
~~~

and

~~~json
"Prem" : ["?X |- ?Y", ""]
~~~

to `RuleZer` in `rules`. This is assuming that the type `Locale` has a constructor `Premise Sequent`.
</td>
</tr>
</table>


The menu bar holds the options to load a previous session or save the current one. A session contains assumptions and proof trees generated inside the UI. 

### LaTeX Typesetting

### Proof search

### Locales and relAKA
